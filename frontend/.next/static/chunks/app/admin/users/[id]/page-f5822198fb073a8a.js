(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{80574:function(e,s,t){Promise.resolve().then(t.bind(t,78114))},32660:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},41671:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},89345:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},13041:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},92369:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(79205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},78114:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var a=t(85583),l=t(1780),n=t(57437),r=t(2265),i=t(99376),c=t(75864),d=t(27648);t(90309);var x=t(32660),o=t(87414),m=t(41671),h=t(32489),u=t(89345),g=t(13041),p=t(92369),y=t(31047),j=t(60044),f=t(49232);function b(){let e=(0,i.useRouter)(),s=(0,i.useParams)().id,[t,b]=(0,r.useState)(null),[N,v]=(0,r.useState)(null),[w,_]=(0,r.useState)(null),[k,Z]=(0,r.useState)([]),[C,S]=(0,r.useState)(!0),[D,A]=(0,r.useState)(!1),[L,M]=(0,r.useState)(!1),[z,F]=(0,r.useState)({type:"",text:""}),[P,q]=(0,r.useState)({amount:100,reason:"",send_notification:!0});(0,r.useEffect)(()=>{(async()=>{try{let t=await c.Z.get("/auth/me");if("admin"!==t.data.role){e.push("/dashboard");return}b(t.data);let a=await c.Z.get("/admin/users/".concat(s));v(a.data.user),_(a.data.profile);let l=await c.Z.get("/admin/users/".concat(s,"/donations"));Z(l.data)}catch(s){console.error("Failed to fetch data:",s),e.push("/admin/users")}finally{S(!1)}})()},[e,s]);let E=async e=>{e.preventDefault(),M(!0),F({type:"",text:""});try{await c.Z.post("/admin/users/".concat(s,"/donate-credits"),(0,a._)({user_id:s},P)),F({type:"success",text:"Credits donated successfully!"}),A(!1),q({amount:100,reason:"",send_notification:!0});let e=await c.Z.get("/admin/users/".concat(s));v(e.data.user);let t=await c.Z.get("/admin/users/".concat(s,"/donations"));Z(t.data),setTimeout(()=>F({type:"",text:""}),3e3)}catch(e){var t,l;F({type:"error",text:(null===(l=e.response)||void 0===l?void 0:null===(t=l.data)||void 0===t?void 0:t.detail)||"Failed to donate credits"})}finally{M(!1)}};return C?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):N?(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("div",{className:"bg-white border-b",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(d.default,{href:"/admin/users",className:"text-gray-600 hover:text-blue-600",children:(0,n.jsx)(x.Z,{className:"h-6 w-6"})}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"User Details"})]}),(0,n.jsxs)("button",{onClick:()=>A(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,n.jsx)(o.Z,{className:"h-5 w-5"}),"Donate Credits"]})]})})}),(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[z.text&&(0,n.jsxs)("div",{className:"mb-6 p-4 rounded-lg flex items-start gap-3 ".concat("success"===z.type?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:["success"===z.type?(0,n.jsx)(m.Z,{className:"h-5 w-5 mt-0.5"}):(0,n.jsx)(h.Z,{className:"h-5 w-5 mt-0.5"}),(0,n.jsx)("p",{children:z.text})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Basic Information"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(u.Z,{className:"h-5 w-5 text-gray-400"}),(0,n.jsx)("span",{className:"text-gray-700",children:N.email})]}),N.phone&&(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(g.Z,{className:"h-5 w-5 text-gray-400"}),(0,n.jsx)("span",{className:"text-gray-700",children:N.phone})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(p.Z,{className:"h-5 w-5 text-gray-400"}),(0,n.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat((e=>{switch(e){case"jobseeker":return"bg-blue-100 text-blue-700";case"employer":return"bg-green-100 text-green-700";case"interviewer":return"bg-purple-100 text-purple-700";case"admin":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(N.role)),children:N.role})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(y.Z,{className:"h-5 w-5 text-gray-400"}),(0,n.jsxs)("span",{className:"text-gray-700",children:["Joined ",new Date(N.created_at).toLocaleDateString()]})]}),N.last_login&&(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(y.Z,{className:"h-5 w-5 text-gray-400"}),(0,n.jsxs)("span",{className:"text-gray-700",children:["Last login: ",new Date(N.last_login).toLocaleDateString()]})]})]})]}),w&&(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Profile Information"}),(0,n.jsxs)("div",{className:"space-y-3",children:[w.first_name&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),(0,n.jsxs)("p",{className:"text-gray-900",children:[w.first_name," ",w.last_name]})]}),w.company_name&&(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(j.Z,{className:"h-5 w-5 text-gray-400 mt-1"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Company:"}),(0,n.jsx)("p",{className:"text-gray-900",children:w.company_name})]})]}),w.headline&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Headline:"}),(0,n.jsx)("p",{className:"text-gray-900",children:w.headline})]}),w.about&&(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"About:"}),(0,n.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:w.about})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Credit Donation History"}),k.length>0?(0,n.jsx)("div",{className:"space-y-3",children:k.map(e=>(0,n.jsx)("div",{className:"border-l-4 border-green-500 pl-4 py-2",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4 text-yellow-500"}),(0,n.jsxs)("span",{className:"font-semibold text-gray-900",children:["+",e.amount," credits"]})]}),e.reason&&(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.reason})]}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})},e.id))}):(0,n.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No donations yet"})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,n.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,n.jsx)(f.Z,{className:"h-5 w-5 text-yellow-500"}),"Credit Balance"]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Free Credits:"}),(0,n.jsx)("span",{className:"text-2xl font-bold text-green-600",children:N.credits_free||0})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Paid Credits:"}),(0,n.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:N.credits_paid||0})]}),(0,n.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium text-gray-900",children:"Total:"}),(0,n.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:(N.credits_free||0)+(N.credits_paid||0)})]})})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Account Status"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Active:"}),(0,n.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold ".concat(N.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:N.is_active?"Yes":"No"})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Verified:"}),(0,n.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold ".concat(N.is_verified?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:N.is_verified?"Yes":"No"})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Actions"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d.default,{href:"/admin/credits?user_id=".concat(s),className:"block px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-center",children:"View Transactions"}),(0,n.jsx)("button",{onClick:()=>A(!0),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Donate Credits"})]})]})]})]})]}),D&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,n.jsx)(o.Z,{className:"h-6 w-6"}),"Donate Credits"]}),(0,n.jsx)("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:(0,n.jsx)(h.Z,{className:"h-6 w-6"})})]}),(0,n.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (Credits)"}),(0,n.jsx)("input",{type:"number",value:P.amount,onChange:e=>q((0,l._)((0,a._)({},P),{amount:parseInt(e.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (Optional)"}),(0,n.jsx)("textarea",{value:P.reason,onChange:e=>q((0,l._)((0,a._)({},P),{reason:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Promotional bonus, performance reward, etc."})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",checked:P.send_notification,onChange:e=>q((0,l._)((0,a._)({},P),{send_notification:e.target.checked})),className:"rounded"}),(0,n.jsx)("span",{className:"text-sm text-gray-700",children:"Send notification to user"})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,n.jsx)("button",{type:"button",onClick:()=>A(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:L,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:L?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Donating..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),"Donate ",P.amount," Credits"]})})]})]})]})})})]}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User not found"}),(0,n.jsx)(d.default,{href:"/admin/users",className:"text-blue-600 hover:text-blue-700",children:"‚Üê Back to users"})]})})}}},function(e){e.O(0,[216,3464,6084,4177,2971,2117,1744],function(){return e(e.s=80574)}),_N_E=e.O()}]);