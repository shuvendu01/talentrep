(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7937],{80402:function(e,t,r){Promise.resolve().then(r.bind(r,81195))},5005:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},92934:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},99376:function(e,t,r){"use strict";var s=r(35475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},81195:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(57437),a=r(2265),n=r(99376),i=r(75864),o=r(5005),c=r(51817),l=r(92934),u=r(99388),d=r(27648);function h(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[r,h]=(0,a.useState)("verifying"),[m,f]=(0,a.useState)("");return(0,a.useEffect)(()=>{let r=t.get("token");if(!r){h("error"),f("Invalid verification link");return}(async()=>{try{let t=await i.Z.get("/auth/verify?token=".concat(r));localStorage.setItem("authToken",t.data.access_token),localStorage.setItem("user",JSON.stringify(t.data.user)),h("success"),f("Successfully authenticated!"),setTimeout(()=>{let r=t.data.user.role;"admin"===r?e.push("/admin/dashboard"):"employer"===r?e.push("/employer/dashboard"):"interviewer"===r?e.push("/interviewer/dashboard"):e.push("/dashboard")},1500)}catch(e){var t,s;h("error"),f((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.detail)||"Failed to verify magic link")}})()},[t,e]),(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-50 flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[(0,s.jsx)("div",{className:"text-center mb-8",children:(0,s.jsxs)(d.default,{href:"/",className:"inline-flex items-center space-x-2 text-blue-600",children:[(0,s.jsx)(o.Z,{className:"h-10 w-10"}),(0,s.jsx)("span",{className:"text-3xl font-bold",children:"TalentHub"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:(0,s.jsxs)("div",{className:"text-center py-8",children:["verifying"===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"h-16 w-16 text-blue-600 animate-spin mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verifying..."}),(0,s.jsx)("p",{className:"text-gray-600",children:"Please wait while we verify your magic link"})]}),"success"===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-6",children:(0,s.jsx)(l.Z,{className:"h-10 w-10 text-green-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Back!"}),(0,s.jsx)("p",{className:"text-gray-600",children:m}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"Redirecting to your dashboard..."})]}),"error"===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-6",children:(0,s.jsx)(u.Z,{className:"h-10 w-10 text-red-600"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Verification Failed"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:m}),(0,s.jsx)(d.default,{href:"/auth/login",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Request New Link"})]})]})})]})})}},75864:function(e,t,r){"use strict";var s=r(83464);let a=window.location.origin?window.location.origin:"https://jobvista-1.preview.emergentagent.com";console.log("API URL:",a);let n=s.Z.create({baseURL:"".concat(a,"/api"),headers:{"Content-Type":"application/json"},withCredentials:!1,timeout:3e4});n.interceptors.request.use(e=>{{let t=localStorage.getItem("authToken");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>(console.log("API Response:",e.status,e.config.url),e),async e=>{var t,r;let s=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!s._retry){s._retry=!0;{localStorage.removeItem("authToken"),localStorage.removeItem("user");let e=window.location.pathname;["/auth/login","/auth/register","/auth/verify","/","/auth/forgot-password"].some(t=>e.startsWith(t))||(window.location.href="/auth/login")}}return e.response?console.error("API Error Response:",e.response.status,e.response.data):e.request?(console.error("API No Response:",e.request),console.error("Request URL:",null===(r=e.config)||void 0===r?void 0:r.url)):console.error("API Request Setup Error:",e.message),Promise.reject(e)}),t.Z=n}},function(e){e.O(0,[216,3464,2971,2117,1744],function(){return e(e.s=80402)}),_N_E=e.O()}]);